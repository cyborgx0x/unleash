{% extends "layout.html" %} {% block title %} Edit {{author.name}}{% endblock %}
{% block layoutleft %}
<div style="margin: 5px">
  <div class="bg-dark text-white">
    <a class="dropdown-item" href="/u/{{current_user.id}}#author-manage">
      <!-- Download SVG icon from http://tabler-icons.io/i/arrow-back-up -->
      <button class="btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="icon"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1" />
        </svg>
        Trang qu·∫£n l√Ω
      </button>
    </a>
    <a
      class="dropdown-item"
      href="{{url_for('author_page', author_name=author.name)}}"
      >V·ªÅ trang t√°c gi·∫£</a
    >
    <button
      class="dropdown-item"
      onclick="showMedia(this)"
      value="author-basic"
    >
      Ch·ªânh s·ª≠a th√¥ng tin
    </button>
    <button
      class="dropdown-item"
      onclick="showMedia(this)"
      value="author-description"
    >
      Ch·ªânh s·ª≠a ti·ªÉu s·ª≠
    </button>
    <a href="#" class="dropdown-item">Th√™m Media üì∑</a>
    <button
      class="dropdown-item"
      onclick="showMedia(this)"
      value="chapter_statistic"
    >
      Th√¥ng tin th·ªëng k√™
    </button>
    <!-- <a href="/author/{{author.id}}/delete" class="dropdown-item">Delete this author</a>  -->
  </div>
</div>
{% endblock %} {% block layoutcenter %}
<div class="card">
  <div class="card-body">
    <div class="tab-content" id="tab-content">
      <div class="tab-pane show active" id="author-basic">
        <div class="alert" role="alert" id="alert-theme">
          <h4 class="alert-heading" id="alert-information">
            M·ªói m·ª•c ƒë·ªÅu ri√™ng bi·ªát. Khi ch·ªânh s·ª≠a xong vui l√≤ng nh·∫•n enter
          </h4>
        </div>
        <div class="form-group">
          <label for="author_name">T√™n t√°c gi·∫£</label>
          <input
            type="text"
            class="form-control"
            name="author_name"
            id="author_name"
            value="{{author.name}}"
            onchange="uploadData(this)"
          />
          <label for="author_birth_year">NƒÉm sinh</label>
          <input
            type="text"
            class="form-control"
            name="author_birth_year"
            id="author_birth_year"
            value="{{author.birth_year}}"
            onchange="uploadData(this)"
          />
          <label for="author_page">Trang web</label>
          <input
            type="text"
            class="form-control"
            name="author_page"
            id="author_page"
            value="{{author.author_page}}"
            onchange="uploadData(this)"
          />
          <label for="author_img">·∫¢nh c√° nh√¢n</label>
          <input
            type="text"
            class="form-control"
            name="author_img"
            id="author_img"
            value="{{author.img}}"
            onchange="uploadData(this)"
          />
        </div>
        <script>
          function uploadData(context) {
            console.log(context);
            let alert = context.parentNode.previousElementSibling;
            data = {
              type: context.name,
              value: context.value,
            };
            axios
              .post("", data)
              .then((res) => {
                alert.className = "alert alert-success";
                alert.firstElementChild.textContent = res.data;
              })
              .catch((err) => {
                alert.className = "alert alert-danger";
                alert.firstElementChild.textContent = err.message;
              });
          }
        </script>
      </div>
      <div class="tab-pane" id="author-description">
        <!-- <button type="button" class="btn btn-danger" onclick="loadEditor(this)" name="init-button" value="init">Load Editor</button> -->
        {% include "_editorjs.html"%}
      </div>
    </div>
  </div>
</div>
{% endblock %}
