{% extends "layout.html" %}
{% block title %}Edit Chapter{% endblock %}

{% block layoutleft %}
<div  style="margin:5px">
    <div class="bg-dark text-white">
        <a class="dropdown-item" href="{{url_for('edit_specific_post', fiction_id=chapter.fiction)}}#manage-chapter">Trá»Ÿ vá» quáº£n lÃ½ tÃ¡c pháº©m</a>
        <a class="dropdown-item" href="{{url_for('chapter_viewer', chapter_id=chapter.id)}}#manage-chapter">Äá»c chÆ°Æ¡ng nÃ y</a>
        <button class="dropdown-item" onclick="showMedia(this)" value="edit_chapter">Chá»‰nh sá»­a thÃ´ng tin</button>
        <button class="dropdown-item" onclick="showMedia(this)" value="chapter_content">Chá»‰nh sá»­a ná»™i dung chÆ°Æ¡ng ğŸ“</button>
        <button class="dropdown-item" onclick="showMedia(this)" value="chapter_statistic">ThÃ´ng tin thá»‘ng kÃª</button>
    </div>
</div>
{% endblock %}
{% block layoutcenter %}
<div class="card"> 
    <div class="card-body">
        <div class="tab-content" id="tab-content">
            <div class="tab-pane" id="chapter_content">
                {% include "_editorjs.html" %}
            </div>
            <div class="tab-pane active show" id="edit_chapter">
                <div class="alert" role="alert" id="alert-theme">
                    <h4 class="alert-heading"  id="alert-information"> Má»—i má»¥c Ä‘á»u riÃªng biá»‡t. Khi chá»‰nh sá»­a xong vui lÃ²ng nháº¥n enter </h4>
                </div>
                <div class="form-group">
                    <label for="chapter_name">TiÃªu Ä‘á» chÆ°Æ¡ng</label>
                    <input type="text" class="form-control" name="chapter_name" id="chapter_name" value="{{chapter.name}}">
                    <label for="chapter_order">Thá»© tá»±</label>
                    <input type="text" class="form-control" name="chapter_order" id="chapter_order" value="{{chapter.chapter_order}}">
                </div>
            </div>
            <div class="tab-pane" id="chapter_statistic">
                <h1> Sá»‘ liá»‡u chÆ°Æ¡ng </h1>
                LÆ°á»£t Ä‘á»c: 
                <span class="badge bg-cyan">
                    {{chapter.view_count}} ğŸ±â€ğŸ‘¤ views, {{chapter.bookmark| count}} ğŸ“œ Ä‘Ã¡nh dáº¥u
                </span> </a> 
            </div>
        </div>
    </div>
</div>
<script>
    let input = document.getElementById('edit_chapter').querySelectorAll('.form-control')
    for (let i=0; i<input.length;i++) {
        input[i].addEventListener('change', (e)=>{
            axios.post('', {type:e.target.name, value:e.target.value})
            .then((res)=>{
                document.getElementById('alert-information').textContent='Result: ' + res.data;
                document.getElementById('alert-theme').className = 'alert alert-success';
            })
            .catch((err)=>{
                document.getElementById('alert-information').textContent=err.message
                document.getElementById('alert-theme').className = 'alert alert-danger'
            })
        })
    }
    function saveContent(context) {
        console.log('test')
    }
</script>
{% endblock %}
{% block layoutright %}

{% endblock %}
