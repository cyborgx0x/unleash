{% extends "layout.html" %}
{% block title %} Dashboard {% endblock %}
{% block layoutleft %}
<div  style="margin:5px">
    <div class="bg-dark text-white">
        <button class="dropdown-item" onclick="showMedia(this)" value='bookmark-list'>Danh sách bookmark</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='author-followed'>Tác giả đã theo dõi</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='like-fiction'>Tác phẩm yêu thích</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='user-activity'>Lịch sử hoạt động</button>
        <button class="dropdown-item" onclick="showMedia(this)" value="user-media">Quản lý media</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='user-posts'>Danh sách bài viết</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='your-fiction'>Quản lý tác phẩm</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='configuration'>Cổng thanh toán</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='like-fiction'>Ví của bạn</button>
        <button class="dropdown-item" onclick="showMedia(this)" value='user-activity'>Liên hệ</button>
    </div>
</div>
{% endblock %}

{% block layoutcenter %}

<div class="card">
    <div class="card-body">
        <div class="tab-content" id="tab-content">
            <div class="tab-pane" id="user-activity">
                {% include "_recent.html"%}
            </div>
            <div class="tab-pane" id="like-fiction">
                <div>
                    <h1>All your liked fiction</h1>
                    <div class='row row-deck'>
                        {% for fiction in fictions %}
                        <div class="col-6 col-md-3"> {% include '_fiction.html' %} </div>

                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="user-media">
                <div>
                    {% for media in medias%}
                    {% if media.media_type == "youtube" %}
                    Video Extention
                    <div class="card-text">
                        <h5>{{media.title}}</h5>
                        {% with %}
                        {% set url = media.content %}
                        {% include '_youtubeplayer.html'%}
                        {% endwith %}
            
                    </div>
            
                    <hr>
                    {% elif media.media_type == "quote" %}
                    {{media.content}}
                    <hr>
                    {% elif media.media_type == "download_link" %}
                    Link tải sách:
                    <a href="{{media.content}}">{{media.title}}</a>
                    <hr>
                    {% else %}
                    Type Unknown
                    <hr>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="tab-pane" id="user-posts">
                {% for post in posts%}
                <a href="{{url_for('view_post', user_name=user.user_name, post_id=post.id)}}">
                    {{post.title}} - {{post.post_type}} - {{post.template}}
                </a>
                <hr>
                {% endfor%}
            </div>
            <div class="tab-pane show active" id="bookmark-list">
                Bookmark List
                {% block bookmark %}
                {{super()}}
                {% endblock %}
            </div>
            <div class="tab-pane" id="your-fiction">
                
                <a href="{{url_for('new_fiction')}}" class="nav-link">Tạo tác phẩm mới</a>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block layoutright %}
<div class="card">
    <div class="card-body p-4 text-center bg-dark text-white">
        <span class="avatar avatar-xl mb-3 avatar-rounded">
            <img src="{{ user.avatar(128) }}" alt="" style="width:100%;height:auto" class="avatar avatar-xl mb-3 avatar-rounded">
        </span>
        <h3 class="m-0 mb-1" style="height: 30; color:white;"><a
                href="{{url_for('user', username=user.user_name)}}">{{user.user_name}}</a></h3>
        <div class="text-muted" style="height: 30; color:white;">Năm sinh</div>
        <div class="mt-3">
            <span class="badge bg-purple">
                Coin Amount: $10 000
            </span>
            <span class="badge bg-cyan">
                Owner of Author: <a href="{{url_for('author_page', author_name=owning.name)}}">{{owning.name}}</a>
            </span>

        </div>
    </div>
</div>
{% endblock %}